/*! alcatraz theme JS - This file is built with Grunt and should not be edited directly */

!function(a,b,c){"function"==typeof define&&define.amd?define(["jquery"],function(d){return c(d,a,b),d.mobile}):c(a.jQuery,a,b)}(this,document,function(a,b,c,d){!function(a,c){a.extend(a.support,{orientation:"orientation"in b&&"onorientationchange"in b})}(a),function(a){a.event.special.throttledresize={setup:function(){a(this).bind("resize",f)},teardown:function(){a(this).unbind("resize",f)}};var b,c,d,e=250,f=function(){c=(new Date).getTime(),d=c-g,d>=e?(g=c,a(this).trigger("throttledresize")):(b&&clearTimeout(b),b=setTimeout(f,e-d))},g=0}(a),function(a,b){function d(){var a=e();a!==f&&(f=a,l.trigger(m))}var e,f,g,h,i,j,k,l=a(b),m="orientationchange",n={0:!0,180:!0};a.support.orientation&&(i=b.innerWidth||l.width(),j=b.innerHeight||l.height(),k=50,g=i>j&&i-j>k,h=n[b.orientation],(g&&h||!g&&!h)&&(n={"-90":!0,90:!0})),a.event.special.orientationchange=a.extend({},a.event.special.orientationchange,{setup:function(){return!(a.support.orientation&&!a.event.special.orientationchange.disabled)&&(f=e(),void l.bind("throttledresize",d))},teardown:function(){return!(a.support.orientation&&!a.event.special.orientationchange.disabled)&&void l.unbind("throttledresize",d)},add:function(a){var b=a.handler;a.handler=function(a){return a.orientation=e(),b.apply(this,arguments)}}}),a.event.special.orientationchange.orientation=e=function(){var d=!0,e=c.documentElement;return d=a.support.orientation?n[b.orientation]:e&&e.clientWidth/e.clientHeight<1.1,d?"portrait":"landscape"},a.fn[m]=function(a){return a?this.bind(m,a):this.trigger(m)},a.attrFn&&(a.attrFn[m]=!0)}(a,this),function(a,b,c,d){function e(a){for(;a&&"undefined"!=typeof a.originalEvent;)a=a.originalEvent;return a}function f(b,c){var f,g,h,i,j,k,l,m,n,o=b.type;if(b=a.Event(b),b.type=c,f=b.originalEvent,g=a.event.props,o.search(/^(mouse|click)/)>-1&&(g=E),f)for(l=g.length,i;l;)i=g[--l],b[i]=f[i];if(o.search(/mouse(down|up)|click/)>-1&&!b.which&&(b.which=1),o.search(/^touch/)!==-1&&(h=e(f),o=h.touches,j=h.changedTouches,k=o&&o.length?o[0]:j&&j.length?j[0]:d,k))for(m=0,n=C.length;m<n;m++)i=C[m],b[i]=k[i];return b}function g(b){for(var c,d,e={};b;){c=a.data(b,z);for(d in c)c[d]&&(e[d]=e.hasVirtualBinding=!0);b=b.parentNode}return e}function h(b,c){for(var d;b;){if(d=a.data(b,z),d&&(!c||d[c]))return b;b=b.parentNode}return null}function i(){M=!1}function j(){M=!0}function k(){Q=0,K.length=0,L=!1,j()}function l(){i()}function m(){n(),G=setTimeout(function(){G=0,k()},a.vmouse.resetTimerDuration)}function n(){G&&(clearTimeout(G),G=0)}function o(b,c,d){var e;return(d&&d[b]||!d&&h(c.target,b))&&(e=f(c,b),a(c.target).trigger(e)),e}function p(b){var c,d=a.data(b.target,A);!L&&(!Q||Q!==d)&&(c=o("v"+b.type,b),c&&(c.isDefaultPrevented()&&b.preventDefault(),c.isPropagationStopped()&&b.stopPropagation(),c.isImmediatePropagationStopped()&&b.stopImmediatePropagation()))}function q(b){var c,d,f,h=e(b).touches;h&&1===h.length&&(c=b.target,d=g(c),d.hasVirtualBinding&&(Q=P++,a.data(c,A,Q),n(),l(),J=!1,f=e(b).touches[0],H=f.pageX,I=f.pageY,o("vmouseover",b,d),o("vmousedown",b,d)))}function r(a){M||(J||o("vmousecancel",a,g(a.target)),J=!0,m())}function s(b){if(!M){var c=e(b).touches[0],d=J,f=a.vmouse.moveDistanceThreshold,h=g(b.target);J=J||Math.abs(c.pageX-H)>f||Math.abs(c.pageY-I)>f,J&&!d&&o("vmousecancel",b,h),o("vmousemove",b,h),m()}}function t(a){if(!M){j();var b,c,d=g(a.target);o("vmouseup",a,d),J||(b=o("vclick",a,d),b&&b.isDefaultPrevented()&&(c=e(a).changedTouches[0],K.push({touchID:Q,x:c.clientX,y:c.clientY}),L=!0)),o("vmouseout",a,d),J=!1,m()}}function u(b){var c,d=a.data(b,z);if(d)for(c in d)if(d[c])return!0;return!1}function v(){}function w(b){var c=b.substr(1);return{setup:function(){u(this)||a.data(this,z,{});var d=a.data(this,z);d[b]=!0,F[b]=(F[b]||0)+1,1===F[b]&&O.bind(c,p),a(this).bind(c,v),N&&(F.touchstart=(F.touchstart||0)+1,1===F.touchstart&&O.bind("touchstart",q).bind("touchend",t).bind("touchmove",s).bind("scroll",r))},teardown:function(){--F[b],F[b]||O.unbind(c,p),N&&(--F.touchstart,F.touchstart||O.unbind("touchstart",q).unbind("touchmove",s).unbind("touchend",t).unbind("scroll",r));var d=a(this),e=a.data(this,z);e&&(e[b]=!1),d.unbind(c,v),u(this)||d.removeData(z)}}}var x,y,z="virtualMouseBindings",A="virtualTouchID",B="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),C="clientX clientY pageX pageY screenX screenY".split(" "),D=a.event.mouseHooks?a.event.mouseHooks.props:[],E=a.event.props.concat(D),F={},G=0,H=0,I=0,J=!1,K=[],L=!1,M=!1,N="addEventListener"in c,O=a(c),P=1,Q=0;for(a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},y=0;y<B.length;y++)a.event.special[B[y]]=w(B[y]);N&&c.addEventListener("click",function(b){var c,d,e,f,g,h,i=K.length,j=b.target;if(i)for(c=b.clientX,d=b.clientY,x=a.vmouse.clickDistanceThreshold,e=j;e;){for(f=0;f<i;f++)if(g=K[f],h=0,e===j&&Math.abs(g.x-c)<x&&Math.abs(g.y-d)<x||a.data(e,A)===g.touchID)return b.preventDefault(),void b.stopPropagation();e=e.parentNode}},!0)}(a,b,c),function(a){a.mobile={}}(a),function(a,b){var d={touch:"ontouchend"in c};a.mobile.support=a.mobile.support||{},a.extend(a.support,d),a.extend(a.mobile.support,d)}(a),function(a,b,d){function e(b,c,e,f){var g=e.type;e.type=c,f?a.event.trigger(e,d,b):a.event.dispatch.call(b,e),e.type=g}var f=a(c),g=a.mobile.support.touch,h="touchmove scroll",i=g?"touchstart":"mousedown",j=g?"touchend":"mouseup",k=g?"touchmove":"mousemove";a.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(b,c){a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)},a.attrFn&&(a.attrFn[c]=!0)}),a.event.special.scrollstart={enabled:!0,setup:function(){function b(a,b){c=b,e(f,c?"scrollstart":"scrollstop",a)}var c,d,f=this,g=a(f);g.bind(h,function(e){a.event.special.scrollstart.enabled&&(c||b(e,!0),clearTimeout(d),d=setTimeout(function(){b(e,!1)},50))})},teardown:function(){a(this).unbind(h)}},a.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var b=this,c=a(b),d=!1;c.bind("vmousedown",function(g){function h(){clearTimeout(k)}function i(){h(),c.unbind("vclick",j).unbind("vmouseup",h),f.unbind("vmousecancel",i)}function j(a){i(),d||l!==a.target?d&&a.preventDefault():e(b,"tap",a)}if(d=!1,g.which&&1!==g.which)return!1;var k,l=g.target;c.bind("vmouseup",h).bind("vclick",j),f.bind("vmousecancel",i),k=setTimeout(function(){a.event.special.tap.emitTapOnTaphold||(d=!0),e(b,"taphold",a.Event("taphold",{target:l}))},a.event.special.tap.tapholdThreshold)})},teardown:function(){a(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),f.unbind("vmousecancel")}},a.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(a){var c=b.pageXOffset,d=b.pageYOffset,e=a.clientX,f=a.clientY;return 0===a.pageY&&Math.floor(f)>Math.floor(a.pageY)||0===a.pageX&&Math.floor(e)>Math.floor(a.pageX)?(e-=c,f-=d):(f<a.pageY-d||e<a.pageX-c)&&(e=a.pageX-c,f=a.pageY-d),{x:e,y:f}},start:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y],origin:a(b.target)}},stop:function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]:b,d=a.event.special.swipe.getLocation(c);return{time:(new Date).getTime(),coords:[d.x,d.y]}},handleSwipe:function(b,c,d,f){if(c.time-b.time<a.event.special.swipe.durationThreshold&&Math.abs(b.coords[0]-c.coords[0])>a.event.special.swipe.horizontalDistanceThreshold&&Math.abs(b.coords[1]-c.coords[1])<a.event.special.swipe.verticalDistanceThreshold){var g=b.coords[0]>c.coords[0]?"swipeleft":"swiperight";return e(d,"swipe",a.Event("swipe",{target:f,swipestart:b,swipestop:c}),!0),e(d,g,a.Event(g,{target:f,swipestart:b,swipestop:c}),!0),!0}return!1},eventInProgress:!1,setup:function(){var b,c=this,d=a(c),e={};b=a.data(this,"mobile-events"),b||(b={length:0},a.data(this,"mobile-events",b)),b.length++,b.swipe=e,e.start=function(b){if(!a.event.special.swipe.eventInProgress){a.event.special.swipe.eventInProgress=!0;var d,g=a.event.special.swipe.start(b),h=b.target,i=!1;e.move=function(b){g&&!b.isDefaultPrevented()&&(d=a.event.special.swipe.stop(b),i||(i=a.event.special.swipe.handleSwipe(g,d,c,h),i&&(a.event.special.swipe.eventInProgress=!1)),Math.abs(g.coords[0]-d.coords[0])>a.event.special.swipe.scrollSupressionThreshold&&b.preventDefault())},e.stop=function(){i=!0,a.event.special.swipe.eventInProgress=!1,f.off(k,e.move),e.move=null},f.on(k,e.move).one(j,e.stop)}},d.on(i,e.start)},teardown:function(){var b,c;b=a.data(this,"mobile-events"),b&&(c=b.swipe,delete b.swipe,b.length--,0===b.length&&a.removeData(this,"mobile-events")),c&&(c.start&&a(this).off(i,c.start),c.move&&f.off(k,c.move),c.stop&&f.off(j,c.stop))}},a.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(b,c){a.event.special[b]={setup:function(){a(this).bind(c,a.noop)},teardown:function(){a(this).unbind(c)}}})}(a,this),function(a,b){var d={animation:{},transition:{}},e=c.createElement("a"),f=["","webkit-","moz-","o-"];a.each(["animation","transition"],function(c,g){var h=0===c?g+"-name":g;a.each(f,function(c,f){if(e.style[a.camelCase(f+h)]!==b)return d[g].prefix=f,!1}),d[g].duration=a.camelCase(d[g].prefix+g+"-duration"),d[g].event=a.camelCase(d[g].prefix+g+"-end"),""===d[g].prefix&&(d[g].event=d[g].event.toLowerCase())}),a.support.cssTransitions=d.transition.prefix!==b,a.support.cssAnimations=d.animation.prefix!==b,a(e).remove(),a.fn.animationComplete=function(e,f,g){var h,i,j=this,k=function(){clearTimeout(h),e.apply(this,arguments)},l=f&&"animation"!==f?"transition":"animation";return a.support.cssTransitions&&"transition"===l||a.support.cssAnimations&&"animation"===l?(g===b&&(a(this).context!==c&&(i=3e3*parseFloat(a(this).css(d[l].duration))),(0===i||i===b||isNaN(i))&&(i=a.fn.animationComplete.defaultDuration)),h=setTimeout(function(){a(j).off(d[l].event,k),e.apply(j)},i),a(this).one(d[l].event,k)):(setTimeout(a.proxy(e,this),0),a(this))},a.fn.animationComplete.defaultDuration=1e3}(a)});var AlcatrazUtilities=function(a){function b(a){return String(a).replace(/[&<>"'\/]/g,function(a){return c[a]})}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return{escapeHtml:b}}(jQuery);!function(){var a=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,b=navigator.userAgent.toLowerCase().indexOf("opera")>-1,c=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(a||b||c)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var a,b=location.hash.substring(1);/^[A-z0-9_-]+$/.test(b)&&(a=document.getElementById(b),a&&(/^(?:a|select|input|button|textarea)$/i.test(a.tagName)||(a.tabIndex=-1),a.focus()))},!1)}();var AlcatrazNavigation=function(a){"use strict";var b=a("body"),c=a(window),d=alcatraz_vars.menu_toggle||"",e=(alcatraz_vars.menu_close||"",alcatraz_vars.slide_duration||300),f=function(b){var c=a(this),d=c.parent("li");"focus"===b.type&&d.addClass("focus"),"blur"===b.type&&d.removeClass("focus")},g=function(a,b){var c=b.item||{},d=b.args||{};j(c,d)},h=function(b){var d=b.keyCode?b.keyCode:b.which,f=a(document.activeElement);if(b.altKey||b.ctrlKey)return!0;if(!f.is("nav a:focus"))return!0;var g,h=f.parent(),i=h.parent(),j={autoClose:!0,duration:e},k={autoClose:!1,duration:e},l={item:h,args:j};switch(d){case 9:if("keydown"===b.type)return!0;h.children("ul").length&&i.hasClass("top-level")?c.trigger("toggleListItem.alcatraz",l):i.hasClass("top-level")&&i.children("li.toggled").each(function(){var b={item:a(this),args:k};c.trigger("toggleListItem.alcatraz",b)});break;case 32:if("keydown"===b.type)return b.preventDefault(),!0;h.children("ul").length&&c.trigger("toggleListItem.alcatraz",l);break;case 37:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")&&h.prev("li").length?(g=h.prev("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.parent("li").parent("ul").hasClass("top-level")?(g=i.parent("li").prev("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.hasClass("top-level")||(g=i.parent("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus());break;case 38:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")||h.prev("li").length?!i.hasClass("top-level")&&h.prev("li").length&&h.prev("li").find("a").first().focus():i.parent("li").find("a").first().focus();break;case 39:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")&&h.next("li").length?(g=h.next("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):!i.hasClass("top-level")&&h.children("ul").length?(h.hasClass("toggled")||c.trigger("toggleListItem.alcatraz",l),h.children("ul").first().find("a").first().focus()):i.parent("li").parent("ul").hasClass("top-level")?(g=i.parent("li").next("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.hasClass("top-level")||(g=i.parent("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.next("li").find("a").first().focus());break;case 40:if("keydown"===b.type)return b.preventDefault(),!0;h.children("ul").length&&i.hasClass("top-level")?h.find("ul li").first().find("a").first().focus():!i.hasClass("top-level")&&h.next("li").length&&h.next("li").find("a").first().focus()}return!0},i=function(){var b=a("#primary-menu"),d=a(".menu-toggle"),e=a(".close-toggle"),f=a("body");return console.log(d),b.hasClass("open")?(c.trigger("closeMobileNav.alcatraz"),b.removeClass("open"),b.attr("aria-expanded","false"),d.removeClass("toggled"),e.removeClass("toggled"),f.removeClass("menu-open")):(c.trigger("openMobileNav.alcatraz"),b.addClass("open"),b.attr("aria-expanded","true"),d.addClass("toggled"),e.addClass("toggled"),f.addClass("menu-open")),this},j=function(a,b){var d=a.parents("ul").last(),e=a.find(".sub-level-toggle").first(),f=e.parents("li").last(),g=a.find("ul").first(),h=b||{},i=h.autoClose||!1,j=h.duration||500;if(i&&d.find("ul").not(f.find("ul")).slideUp(j),a.toggleClass("toggled"),e.toggleClass("toggled").blur().next("ul").slideToggle(j).toggleClass("toggled"),d.is("#primary-menu")&&a.hasClass("menu-item-has-children")&&a.hasClass("toggled")){var k=g.width()+g.offset().left,l=c.width();k>l&&a.addClass("reverse-expand")}else setTimeout(function(){a.removeClass("reverse-expand")},j);return d.find(".toggled").not(f).not(f.find(".toggled")).removeClass("toggled"),this},k=function(b,e){var f=e||{};return a(b).each(function(){var b=a(this),e=b.find("li"),g=e.has("ul"),h=Alcatraz.Utils.escapeHtml(d),i='<button type="button" class="sub-level-toggle">'+h+'<span class="sub-level-toggle__bar span-1"></span><span class="sub-level-toggle__bar span-2"></span></button>';b.addClass("top-level"),b.find("ul").addClass("sub-level"),g.each(function(){a(this).find("a").first().after(i)}),b.find(".sub-level-toggle").on("click",function(b){b.preventDefault();var d=a(this).parent("li"),e={item:d,args:f};c.trigger("toggleListItem.alcatraz",e)})})},l=function(){return m(),n(),o(),this},m=function(){var d=a("#site-navigation");if(!d)return!1;var g=d.find(".menu-toggle");if("undefined"==typeof g)return!1;var h=d.find("#primary-menu");if("undefined"==typeof h)return g.css("display","none"),!1;var i=h.find("a"),j=h.find("ul"),l=j.find("a");h.attr("aria-expanded","false"),h.hasClass("nav-menu")||h.addClass("nav-menu"),a.mobile&&(b.hasClass("mobile-nav-style-slide-left")||b.hasClass("mobile-nav-style-slide-right"))&&(a.event.special.swipe.horizontalDistanceThreshold=15,a("#mobile-nav-left-swipe-zone, #mobile-nav-right-swipe-zone, .main-navigation .menu-overlay").on("swipeleft swiperight",function(){c.trigger("toggleMobileNav.alcatraz")})),g.add(".main-navigation .menu-overlay").on("click",function(){c.trigger("toggleMobileNav.alcatraz")});var m={autoClose:!0,duration:e};return k(h,m),a(".close-toggle").on("click",function(){c.trigger("toggleMobileNav.alcatraz")}),j.each(function(){a(this).parent().attr("aria-haspopup","true")}),l.attr("tabIndex","-1"),i.each(function(){a(this).on("focus blur",f)}),this},n=function(){var b=a(".alcatraz-sub-page-nav > ul");if(!b.length)return!1;var c={autoClose:!1,duration:e};return k(b,c),b.find("a").each(function(){a(this).on("focus blur",f)}),this},o=function(){return c.off("toggleMobileNav.alcatraz",i),c.on("toggleMobileNav.alcatraz",i),c.off("toggleListItem.alcatraz",g),c.on("toggleListItem.alcatraz",g),c.off("keydown keyup",h),c.on("keydown keyup",h),this};return{toggleMobileNav:i,toggleListItem:j,initListToggle:k,initSiteNavigation:l,initPrimaryNavigation:m,initSubPageNavigation:n,resetNavEventListeners:o}}(jQuery),Alcatraz=function(a){var b=AlcatrazUtilities||!1,c=AlcatrazNavigation||!1;return{Utils:b,Nav:c}}(jQuery);window.AlcatrazPattern={},function(a,b,c){c.init=function(){c.cache(),c.meetsRequirements()&&c.bindEvents()},c.cache=function(){c.$c={window:b(a),patternDocToggle:b(".pattern-doc__toggle"),patternDocInfo:b(".pattern-doc__info")}},c.bindEvents=function(){c.$c.patternDocToggle.on("click",c.openPatternDocInfo)},c.meetsRequirements=function(){return c.$c.patternDocToggle.length},c.openPatternDocInfo=function(){b(this).parent().siblings(".pattern-doc__info").slideToggle("slow")},b(c.init)}(window,jQuery,window.AlcatrazPattern),function(a){a(document).ready(function(){Alcatraz.Nav.initSiteNavigation()}),a(document).on("customize-preview-menu-refreshed",function(){Alcatraz.Nav.initPrimaryNavigation()})}(jQuery);
//# sourceMappingURL=alcatraz-theme.min.js.map
