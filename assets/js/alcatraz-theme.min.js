/*! alcatraz theme JS - This file is built with Grunt and should not be edited directly */

var AlcatrazUtilities=function(a){function b(a){return String(a).replace(/[&<>"'\/]/g,function(a){return c[a]})}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return{escapeHtml:b}}(jQuery);!function(){var a=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,b=navigator.userAgent.toLowerCase().indexOf("opera")>-1,c=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(a||b||c)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var a,b=location.hash.substring(1);/^[A-z0-9_-]+$/.test(b)&&(a=document.getElementById(b),a&&(/^(?:a|select|input|button|textarea)$/i.test(a.tagName)||(a.tabIndex=-1),a.focus()))},!1)}();var AlcatrazNavigation=function(a){"use strict";var b=a("body"),c=a(window),d=alcatraz_vars.menu_toggle||"",e=(alcatraz_vars.menu_close||"",alcatraz_vars.slide_duration||300),f=function(b){var c=a(this),d=c.parent("li");"focus"===b.type&&d.addClass("focus"),"blur"===b.type&&d.removeClass("focus")},g=function(a,b){var c=b.item||{},d=b.args||{};j(c,d)},h=function(b){var d=b.keyCode?b.keyCode:b.which,f=a(document.activeElement);if(b.altKey||b.ctrlKey)return!0;if(!f.is("nav a:focus"))return!0;var g,h=f.parent(),i=h.parent(),j={autoClose:!0,duration:e},k={autoClose:!1,duration:e},l={item:h,args:j};switch(d){case 9:if("keydown"===b.type)return!0;h.children("ul").length&&i.hasClass("top-level")?c.trigger("toggleListItem.alcatraz",l):i.hasClass("top-level")&&i.children("li.toggled").each(function(){var b={item:a(this),args:k};c.trigger("toggleListItem.alcatraz",b)});break;case 32:if("keydown"===b.type)return b.preventDefault(),!0;h.children("ul").length&&c.trigger("toggleListItem.alcatraz",l);break;case 37:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")&&h.prev("li").length?(g=h.prev("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.parent("li").parent("ul").hasClass("top-level")?(g=i.parent("li").prev("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.hasClass("top-level")||(g=i.parent("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus());break;case 38:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")||h.prev("li").length?!i.hasClass("top-level")&&h.prev("li").length&&h.prev("li").find("a").first().focus():i.parent("li").find("a").first().focus();break;case 39:if("keydown"===b.type)return b.preventDefault(),!0;i.hasClass("top-level")&&h.next("li").length?(g=h.next("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):!i.hasClass("top-level")&&h.children("ul").length?(h.hasClass("toggled")||c.trigger("toggleListItem.alcatraz",l),h.children("ul").first().find("a").first().focus()):i.parent("li").parent("ul").hasClass("top-level")?(g=i.parent("li").next("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.find("a").first().focus()):i.hasClass("top-level")||(g=i.parent("li"),c.trigger("toggleListItem.alcatraz",{item:g,args:j}),g.next("li").find("a").first().focus());break;case 40:if("keydown"===b.type)return b.preventDefault(),!0;h.children("ul").length&&i.hasClass("top-level")?h.find("ul li").first().find("a").first().focus():!i.hasClass("top-level")&&h.next("li").length&&h.next("li").find("a").first().focus()}return!0},i=function(){var b=a("#primary-menu"),d=a(".menu-toggle"),e=a(".close-toggle"),f=a("body");return console.log(d),b.hasClass("open")?(c.trigger("closeMobileNav.alcatraz"),b.removeClass("open"),b.attr("aria-expanded","false"),d.removeClass("toggled"),e.removeClass("toggled"),f.removeClass("menu-open")):(c.trigger("openMobileNav.alcatraz"),b.addClass("open"),b.attr("aria-expanded","true"),d.addClass("toggled"),e.addClass("toggled"),f.addClass("menu-open")),this},j=function(a,b){var d=a.parents("ul").last(),e=a.find(".sub-level-toggle").first(),f=e.parents("li").last(),g=a.find("ul").first(),h=b||{},i=h.autoClose||!1,j=h.duration||500;if(i&&d.find("ul").not(f.find("ul")).slideUp(j),a.toggleClass("toggled"),e.toggleClass("toggled").blur().next("ul").slideToggle(j).toggleClass("toggled"),d.is("#primary-menu")&&a.hasClass("menu-item-has-children")&&a.hasClass("toggled")){var k=g.width()+g.offset().left,l=c.width();k>l&&a.addClass("reverse-expand")}else setTimeout(function(){a.removeClass("reverse-expand")},j);return d.find(".toggled").not(f).not(f.find(".toggled")).removeClass("toggled"),this},k=function(b,e){var f=e||{};return a(b).each(function(){var b=a(this),e=b.find("li"),g=e.has("ul"),h=Alcatraz.Utils.escapeHtml(d),i='<button type="button" class="sub-level-toggle">'+h+'<span class="sub-level-toggle__bar span-1"></span><span class="sub-level-toggle__bar span-2"></span></button>';b.addClass("top-level"),b.find("ul").addClass("sub-level"),g.each(function(){a(this).find("a").first().after(i)}),b.find(".sub-level-toggle").on("click",function(b){b.preventDefault();var d=a(this).parent("li"),e={item:d,args:f};c.trigger("toggleListItem.alcatraz",e)})})},l=function(){return m(),n(),o(),this},m=function(){var d=a("#site-navigation");if(!d)return!1;var g=d.find(".menu-toggle");if("undefined"==typeof g)return!1;var h=d.find("#primary-menu");if("undefined"==typeof h)return g.css("display","none"),!1;var i=h.find("a"),j=h.find("ul"),l=j.find("a");h.attr("aria-expanded","false"),h.hasClass("nav-menu")||h.addClass("nav-menu"),a.mobile&&b.hasClass("mobile-nav-style-slide")&&(a.event.special.swipe.horizontalDistanceThreshold=15,a(".mobile-nav-style-slide:before, .mobile-nav-style-slide.menu-open:before").on("swipeleft swiperight",function(){c.trigger("toggleMobileNav.alcatraz")})),g.on("click",function(){c.trigger("toggleMobileNav.alcatraz")});var m={autoClose:!0,duration:e};return k(h,m),a(".close-toggle").on("click",function(){c.trigger("toggleMobileNav.alcatraz")}),j.each(function(){a(this).parent().attr("aria-haspopup","true")}),l.attr("tabIndex","-1"),i.each(function(){a(this).on("focus blur",f)}),this},n=function(){var b=a(".alcatraz-sub-page-nav > ul");if(!b.length)return!1;var c={autoClose:!1,duration:e};return k(b,c),b.find("a").each(function(){a(this).on("focus blur",f)}),this},o=function(){return c.off("toggleMobileNav.alcatraz",i),c.on("toggleMobileNav.alcatraz",i),c.off("toggleListItem.alcatraz",g),c.on("toggleListItem.alcatraz",g),c.off("keydown keyup",h),c.on("keydown keyup",h),this};return{toggleMobileNav:i,toggleListItem:j,initListToggle:k,initSiteNavigation:l,initPrimaryNavigation:m,initSubPageNavigation:n,resetNavEventListeners:o}}(jQuery),Alcatraz=function(a){var b=AlcatrazUtilities||!1,c=AlcatrazNavigation||!1;return{Utils:b,Nav:c}}(jQuery);!function(a){a(document).ready(function(){Alcatraz.Nav.initSiteNavigation()}),a(document).on("customize-preview-menu-refreshed",function(){Alcatraz.Nav.initPrimaryNavigation()})}(jQuery);
//# sourceMappingURL=alcatraz-theme.min.js.map