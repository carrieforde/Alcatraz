/*! alcatraz theme JS - This file is built with Grunt and should not be edited directly */

!function(t,n,i){"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(e,t,n),e.mobile}):i(t.jQuery,t,n)}(this,document,function(e,t,d,n){var l,u,c,a,o,i,r,s;(s=e).extend(s.support,{orientation:"orientation"in t&&"onorientationchange"in t}),function(t){t.event.special.throttledresize={setup:function(){t(this).bind("resize",e)},teardown:function(){t(this).unbind("resize",e)}};var n,i,a,e=function e(){i=(new Date).getTime(),250<=(a=i-o)?(o=i,t(this).trigger("throttledresize")):(n&&clearTimeout(n),n=setTimeout(e,250-a))},o=0}(e),function(t,n){function e(){var e=i();e!==a&&(a=e,u.trigger(c))}var i,a,o,r,s,l,u=t(n),c="orientationchange",p={0:!0,180:!0};t.support.orientation&&(s=n.innerWidth||u.width(),50,o=(l=n.innerHeight||u.height())<s&&50<s-l,r=p[n.orientation],(o&&r||!o&&!r)&&(p={"-90":!0,90:!0})),t.event.special.orientationchange=t.extend({},t.event.special.orientationchange,{setup:function(){if(t.support.orientation&&!t.event.special.orientationchange.disabled)return!1;a=i(),u.bind("throttledresize",e)},teardown:function(){if(t.support.orientation&&!t.event.special.orientationchange.disabled)return!1;u.unbind("throttledresize",e)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=i(),t.apply(this,arguments)}}}),t.event.special.orientationchange.orientation=i=function(){var e=d.documentElement;return(t.support.orientation?p[n.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},t.fn[c]=function(e){return e?this.bind(c,e):this.trigger(c)},t.attrFn&&(t.attrFn[c]=!0)}(e,this),function(f,e,t,d){function g(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function o(e){for(var t,n,i={};e;){for(n in t=f.data(e,C))t[n]&&(i[n]=i.hasVirtualBinding=!0);e=e.parentNode}return i}function a(){X=!0}function r(){X=!1}function s(){l(),L=setTimeout(function(){_=L=0,P.length=0,A=!1,a()},f.vmouse.resetTimerDuration)}function l(){L&&(clearTimeout(L),L=0)}function u(e,t,n){var i;return(n&&n[e]||!n&&function(e,t){for(var n;e;){if((n=f.data(e,C))&&(!t||n[t]))return e;e=e.parentNode}return null}(t.target,e))&&(i=function(e,t){var n,i,a,o,r,s,l,u,c,p=e.type;if((e=f.Event(e)).type=t,n=e.originalEvent,i=f.event.props,-1<p.search(/^(mouse|click)/)&&(i=D),n)for(l=i.length;l;)e[o=i[--l]]=n[o];if(-1<p.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==p.search(/^touch/)&&(p=(a=g(n)).touches,r=a.changedTouches,s=p&&p.length?p[0]:r&&r.length?r[0]:d))for(u=0,c=x.length;u<c;u++)e[o=x[u]]=s[o];return e}(t,e),f(t.target).trigger(i)),i}function c(e){var t,n=f.data(e.target,z);!A&&(!_||_!==n)&&((t=u("v"+e.type,e))&&(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),t.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function p(e){var t,n,i,a=g(e).touches;a&&1===a.length&&((n=o(t=e.target)).hasVirtualBinding&&(_=O++,f.data(t,z,_),l(),r(),M=!1,i=g(e).touches[0],N=i.pageX,E=i.pageY,u("vmouseover",e,n),u("vmousedown",e,n)))}function v(e){X||(M||u("vmousecancel",e,o(e.target)),M=!0,s())}function h(e){if(!X){var t=g(e).touches[0],n=M,i=f.vmouse.moveDistanceThreshold,a=o(e.target);(M=M||Math.abs(t.pageX-N)>i||Math.abs(t.pageY-E)>i)&&!n&&u("vmousecancel",e,a),u("vmousemove",e,a),s()}}function m(e){if(!X){a();var t,n,i=o(e.target);u("vmouseup",e,i),M||(t=u("vclick",e,i))&&t.isDefaultPrevented()&&(n=g(e).changedTouches[0],P.push({touchID:_,x:n.clientX,y:n.clientY}),A=!0),u("vmouseout",e,i),M=!1,s()}}function b(e){var t,n=f.data(e,C);if(n)for(t in n)if(n[t])return!0;return!1}function w(){}function n(n){var i=n.substr(1);return{setup:function(){b(this)||f.data(this,C,{}),f.data(this,C)[n]=!0,I[n]=(I[n]||0)+1,1===I[n]&&S.bind(i,c),f(this).bind(i,w),Y&&(I.touchstart=(I.touchstart||0)+1,1===I.touchstart&&S.bind("touchstart",p).bind("touchend",m).bind("touchmove",h).bind("scroll",v))},teardown:function(){--I[n],I[n]||S.unbind(i,c),Y&&(--I.touchstart,I.touchstart||S.unbind("touchstart",p).unbind("touchmove",h).unbind("touchend",m).unbind("scroll",v));var e=f(this),t=f.data(this,C);t&&(t[n]=!1),e.unbind(i,w),b(this)||e.removeData(C)}}}var y,i,C="virtualMouseBindings",z="virtualTouchID",T="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),x="clientX clientY pageX pageY screenX screenY".split(" "),k=f.event.mouseHooks?f.event.mouseHooks.props:[],D=f.event.props.concat(k),I={},L=0,N=0,E=0,M=!1,P=[],A=!1,X=!1,Y="addEventListener"in t,S=f(t),O=1,_=0;for(f.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<T.length;i++)f.event.special[T[i]]=n(T[i]);Y&&t.addEventListener("click",function(e){var t,n,i,a,o,r=P.length,s=e.target;if(r)for(t=e.clientX,n=e.clientY,y=f.vmouse.clickDistanceThreshold,i=s;i;){for(a=0;a<r;a++)if(o=P[a],0,i===s&&Math.abs(o.x-t)<y&&Math.abs(o.y-n)<y||f.data(i,z)===o.touchID)return e.preventDefault(),void e.stopPropagation();i=i.parentNode}},!0)}(e,0,d),e.mobile={},r={touch:"ontouchend"in d},(i=e).mobile.support=i.mobile.support||{},i.extend(i.support,r),i.extend(i.mobile.support,r),function(u,o,r){function c(e,t,n,i){var a=n.type;n.type=t,i?u.event.trigger(n,r,e):u.event.dispatch.call(e,n),n.type=a}var p=u(d),e=u.mobile.support.touch,s="touchmove scroll",n=e?"touchstart":"mousedown",l=e?"touchend":"mouseup",f=e?"touchmove":"mousemove";u.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){u.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},u.attrFn&&(u.attrFn[t]=!0)}),u.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){c(a,(n=t)?"scrollstart":"scrollstop",e)}var n,i,a=this;u(a).bind(s,function(e){u.event.special.scrollstart.enabled&&(n||t(e,!0),clearTimeout(i),i=setTimeout(function(){t(e,!1)},50))})},teardown:function(){u(this).unbind(s)}},u.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var r=this,s=u(r),l=!1;s.bind("vmousedown",function(e){function t(){clearTimeout(a)}function n(){t(),s.unbind("vclick",i).unbind("vmouseup",t),p.unbind("vmousecancel",n)}function i(e){n(),l||o!==e.target?l&&e.preventDefault():c(r,"tap",e)}if(l=!1,e.which&&1!==e.which)return!1;var a,o=e.target;s.bind("vmouseup",t).bind("vclick",i),p.bind("vmousecancel",n),a=setTimeout(function(){u.event.special.tap.emitTapOnTaphold||(l=!0),c(r,"taphold",u.Event("taphold",{target:o}))},u.event.special.tap.tapholdThreshold)})},teardown:function(){u(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),p.unbind("vmousecancel")}},u.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=o.pageXOffset,n=o.pageYOffset,i=e.clientX,a=e.clientY;return 0===e.pageY&&Math.floor(a)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(i)>Math.floor(e.pageX)?(i-=t,a-=n):(a<e.pageY-n||i<e.pageX-t)&&(i=e.pageX-t,a=e.pageY-n),{x:i,y:a}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:u(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,t,n,i){if(t.time-e.time<u.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>u.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<u.event.special.swipe.verticalDistanceThreshold){var a=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return c(n,"swipe",u.Event("swipe",{target:i,swipestart:e,swipestop:t}),!0),c(n,a,u.Event(a,{target:i,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,o=this,t=u(o),r={};(e=u.data(this,"mobile-events"))||(e={length:0},u.data(this,"mobile-events",e)),e.length++,(e.swipe=r).start=function(e){if(!u.event.special.swipe.eventInProgress){u.event.special.swipe.eventInProgress=!0;var t,n=u.event.special.swipe.start(e),i=e.target,a=!1;r.move=function(e){n&&!e.isDefaultPrevented()&&(t=u.event.special.swipe.stop(e),a||(a=u.event.special.swipe.handleSwipe(n,t,o,i))&&(u.event.special.swipe.eventInProgress=!1),Math.abs(n.coords[0]-t.coords[0])>u.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},r.stop=function(){a=!0,u.event.special.swipe.eventInProgress=!1,p.off(f,r.move),r.move=null},p.on(f,r.move).one(l,r.stop)}},t.on(n,r.start)},teardown:function(){var e,t;(e=u.data(this,"mobile-events"))&&(t=e.swipe,delete e.swipe,e.length--,0===e.length&&u.removeData(this,"mobile-events")),t&&(t.start&&u(this).off(n,t.start),t.move&&p.off(f,t.move),t.stop&&p.off(l,t.stop))}},u.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){u.event.special[e]={setup:function(){u(this).bind(t,u.noop)},teardown:function(){u(this).unbind(t)}}})}(e,this),l=e,c={animation:{},transition:{}},a=d.createElement("a"),o=["","webkit-","moz-","o-"],l.each(["animation","transition"],function(e,n){var i=0===e?n+"-name":n;l.each(o,function(e,t){if(a.style[l.camelCase(t+i)]!==u)return c[n].prefix=t,!1}),c[n].duration=l.camelCase(c[n].prefix+n+"-duration"),c[n].event=l.camelCase(c[n].prefix+n+"-end"),""===c[n].prefix&&(c[n].event=c[n].event.toLowerCase())}),l.support.cssTransitions=c.transition.prefix!==u,l.support.cssAnimations=c.animation.prefix!==u,l(a).remove(),l.fn.animationComplete=function(e,t,n){var i,a,o=this,r=function(){clearTimeout(i),e.apply(this,arguments)},s=t&&"animation"!==t?"transition":"animation";return l.support.cssTransitions&&"transition"===s||l.support.cssAnimations&&"animation"===s?(n===u&&(l(this).context!==d&&(a=3e3*parseFloat(l(this).css(c[s].duration))),(0===a||a===u||isNaN(a))&&(a=l.fn.animationComplete.defaultDuration)),i=setTimeout(function(){l(o).off(c[s].event,r),e.apply(o)},a),l(this).one(c[s].event,r)):(setTimeout(l.proxy(e,this),0),l(this))},l.fn.animationComplete.defaultDuration=1e3});var AlcatrazUtilities=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return{escapeHtml:function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})}}}(jQuery);!function(){var e=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),t=-1<navigator.userAgent.toLowerCase().indexOf("opera"),n=-1<navigator.userAgent.toLowerCase().indexOf("msie");(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}();var AlcatrazNavigation=function(u){"use strict";var s=u("body"),c=u(window),a=alcatraz_vars.menu_toggle||"",p=(alcatraz_vars.menu_close,alcatraz_vars.slide_duration||300),l=function(e){var t=u(this).parent("li");"focus"===e.type&&t.addClass("focus"),"blur"===e.type&&t.removeClass("focus")},e=function(e,t){var n=t.item||{},i=t.args||{};o(n,i)},t=function(e){var t=e.keyCode?e.keyCode:e.which,n=u(document.activeElement);if(e.altKey||e.ctrlKey)return!0;if(!n.is("nav a:focus"))return!0;var i,a=n.parent(),o=a.parent(),r={autoClose:!0,duration:p},s={autoClose:!1,duration:p},l={item:a,args:r};switch(t){case 9:if("keydown"===e.type)return!0;a.children("ul").length&&o.hasClass("top-level")?c.trigger("toggleListItem.alcatraz",l):o.hasClass("top-level")&&o.children("li.toggled").each(function(){var e={item:u(this),args:s};c.trigger("toggleListItem.alcatraz",e)});break;case 32:if("keydown"===e.type)return e.preventDefault(),!0;a.children("ul").length&&c.trigger("toggleListItem.alcatraz",l);break;case 37:if("keydown"===e.type)return e.preventDefault(),!0;o.hasClass("top-level")&&a.prev("li").length?(i=a.prev("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.find("a").first().focus()):o.parent("li").parent("ul").hasClass("top-level")?(i=o.parent("li").prev("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.find("a").first().focus()):o.hasClass("top-level")||(i=o.parent("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.find("a").first().focus());break;case 38:if("keydown"===e.type)return e.preventDefault(),!0;o.hasClass("top-level")||a.prev("li").length?!o.hasClass("top-level")&&a.prev("li").length&&a.prev("li").find("a").first().focus():o.parent("li").find("a").first().focus();break;case 39:if("keydown"===e.type)return e.preventDefault(),!0;o.hasClass("top-level")&&a.next("li").length?(i=a.next("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.find("a").first().focus()):!o.hasClass("top-level")&&a.children("ul").length?(a.hasClass("toggled")||c.trigger("toggleListItem.alcatraz",l),a.children("ul").first().find("a").first().focus()):o.parent("li").parent("ul").hasClass("top-level")?(i=o.parent("li").next("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.find("a").first().focus()):o.hasClass("top-level")||(i=o.parent("li"),c.trigger("toggleListItem.alcatraz",{item:i,args:r}),i.next("li").find("a").first().focus());break;case 40:if("keydown"===e.type)return e.preventDefault(),!0;a.children("ul").length&&o.hasClass("top-level")?a.find("ul li").first().find("a").first().focus():!o.hasClass("top-level")&&a.next("li").length&&a.next("li").find("a").first().focus()}return!0},n=function(){var e=u("body"),t=u("#site-navigation"),n=t.find("#primary-menu");return t.hasClass("toggled")?(e.removeClass("menu-open"),t.removeClass("toggled"),n.attr("aria-expanded","false")):(e.addClass("menu-open"),t.addClass("toggled"),n.attr("aria-expanded","true")),this},o=function(e,t){var n=e.parents("ul").last(),i=e.find(".sub-level-toggle").first(),a=i.parents("li").last(),o=e.find("ul").first(),r=t||{},s=r.autoClose||!1,l=r.duration||500;if(s&&n.find("ul").not(a.find("ul")).slideUp(l),e.toggleClass("toggled"),i.toggleClass("toggled").blur().next("ul").slideToggle(l).toggleClass("toggled"),n.is("#primary-menu")&&e.hasClass("menu-item-has-children")&&e.hasClass("toggled")){var u=o.width()+o.offset().left;c.width()<u&&e.addClass("reverse-expand")}else setTimeout(function(){e.removeClass("reverse-expand")},l);return n.find(".toggled").not(a).not(a.find(".toggled")).removeClass("toggled"),this},f=function(e,t){var i=t||{};return u(e).each(function(){var e=u(this),t=e.find("li").has("ul"),n='<button type="button" class="sub-level-toggle"><span class="screen-reader-text">'+Alcatraz.Utils.escapeHtml(a)+'</span><span class="sub-level-toggle-span span-1"></span><span class="sub-level-toggle-span span-2"></span></button>';t.each(function(){u(this).find("a").first().after(n)}),e.find(".sub-level-toggle").on("click",function(e){e.preventDefault();var t={item:u(this).parent("li"),args:i};c.trigger("toggleListItem.alcatraz",t)})})},i=function(){var e=u("#site-navigation");if(!e)return!1;var t=e.prev(".mobile-menu-toggle");if(void 0===t)return!1;var n=u(".menu-screen");if(!n)return!1;var i=e.find("#primary-menu");if(void 0===i)return t.css("display","none"),!1;var a=i.find("a"),o=i.find("ul"),r=o.find("a");return i.attr("aria-expanded","false"),u.mobile&&(s.hasClass("mobile-nav-style-slide-left")||s.hasClass("mobile-nav-style-slide-right"))&&(u.event.special.swipe.horizontalDistanceThreshold=15,u("#mobile-nav-swipe-zone, .main-navigation").on("swipeleft swiperight",function(){c.trigger("toggleMobileNav.alcatraz")})),t.on("click",function(){c.trigger("toggleMobileNav.alcatraz")}),n.on("click",function(){c.trigger("toggleMobileNav.alcatraz")}),f(i,{autoClose:!0,duration:p}),o.each(function(){u(this).parent().attr("aria-haspopup","true")}),r.attr("tabIndex","-1"),a.each(function(){u(this).on("focus blur",l)}),this},r=function(){var e=u(".alcatraz-sub-page-nav > ul");return!!e.length&&(f(e,{autoClose:!1,duration:p}),e.find("a").each(function(){u(this).on("focus blur",l)}),this)},d=function(){return c.off("toggleMobileNav.alcatraz",n),c.on("toggleMobileNav.alcatraz",n),c.off("toggleListItem.alcatraz",e),c.on("toggleListItem.alcatraz",e),c.off("keydown keyup",t),c.on("keydown keyup",t),this};return{toggleMobileNav:n,toggleListItem:o,initListToggle:f,initSiteNavigation:function(){return i(),r(),d(),this},initPrimaryNavigation:i,initSubPageNavigation:r,resetNavEventListeners:d}}(jQuery),Alcatraz=(jQuery,{Utils:AlcatrazUtilities||!1,Nav:AlcatrazNavigation||!1});!function(e){e(document).ready(function(){Alcatraz.Nav.initSiteNavigation()}),e(document).on("customize-preview-menu-refreshed",function(){Alcatraz.Nav.initPrimaryNavigation()})}(jQuery);
//# sourceMappingURL=alcatraz-theme.min.js.map