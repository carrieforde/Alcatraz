/*! alcatraz theme JS - This file is built with Grunt and should not be edited directly */

!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],function(i){return n(i,e,t),i.mobile}):n(e.jQuery,e,t)}(this,document,function(e,t,n,i){(function(e,n){e.extend(e.support,{orientation:"orientation"in t&&"onorientationchange"in t})})(e),function(e){e.event.special.throttledresize={setup:function(){e(this).bind("resize",a)},teardown:function(){e(this).unbind("resize",a)}};var t,n,i,a=function(){n=(new Date).getTime(),(i=n-o)>=250?(o=n,e(this).trigger("throttledresize")):(t&&clearTimeout(t),t=setTimeout(a,250-i))},o=0}(e),function(e,t){function i(){var e=a();e!==o&&(o=e,p.trigger(d))}var a,o,s,r,l,u,c,p=e(t),d="orientationchange",f={0:!0,180:!0};e.support.orientation&&(c=50,s=(l=t.innerWidth||p.width())>(u=t.innerHeight||p.height())&&l-u>c,r=f[t.orientation],(s&&r||!s&&!r)&&(f={"-90":!0,90:!0})),e.event.special.orientationchange=e.extend({},e.event.special.orientationchange,{setup:function(){if(e.support.orientation&&!e.event.special.orientationchange.disabled)return!1;o=a(),p.bind("throttledresize",i)},teardown:function(){if(e.support.orientation&&!e.event.special.orientationchange.disabled)return!1;p.unbind("throttledresize",i)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=a(),t.apply(this,arguments)}}}),e.event.special.orientationchange.orientation=a=function(){var i=!0,a=n.documentElement;return i=e.support.orientation?f[t.orientation]:a&&a.clientWidth/a.clientHeight<1.1,i?"portrait":"landscape"},e.fn[d]=function(e){return e?this.bind(d,e):this.trigger(d)},e.attrFn&&(e.attrFn[d]=!0)}(e,this),function(e,t,n,i){function a(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function o(t,n){var o,s,r,l,u,c,p,d,f,g=t.type;if(t=e.Event(t),t.type=n,o=t.originalEvent,s=e.event.props,g.search(/^(mouse|click)/)>-1&&(s=N),o)for(p=s.length,l;p;)l=s[--p],t[l]=o[l];if(g.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==g.search(/^touch/)&&(r=a(o),g=r.touches,u=r.changedTouches,c=g&&g.length?g[0]:u&&u.length?u[0]:i))for(d=0,f=I.length;d<f;d++)l=I[d],t[l]=c[l];return t}function s(t){for(var n,i,a={};t;){n=e.data(t,x);for(i in n)n[i]&&(a[i]=a.hasVirtualBinding=!0);t=t.parentNode}return a}function r(t,n){for(var i;t;){if((i=e.data(t,x))&&(!n||i[n]))return t;t=t.parentNode}return null}function l(){O=!1}function u(){O=!0}function c(){H=0,Y.length=0,S=!1,u()}function p(){l()}function d(){f(),M=setTimeout(function(){M=0,c()},e.vmouse.resetTimerDuration)}function f(){M&&(clearTimeout(M),M=0)}function g(t,n,i){var a;return(i&&i[t]||!i&&r(n.target,t))&&(a=o(n,t),e(n.target).trigger(a)),a}function v(t){var n,i=e.data(t.target,k);!S&&(!H||H!==i)&&(n=g("v"+t.type,t))&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}function h(t){var n,i,o,r=a(t).touches;r&&1===r.length&&(n=t.target,(i=s(n)).hasVirtualBinding&&(H=F++,e.data(n,k,H),f(),p(),X=!1,o=a(t).touches[0],P=o.pageX,A=o.pageY,g("vmouseover",t,i),g("vmousedown",t,i)))}function m(e){O||(X||g("vmousecancel",e,s(e.target)),X=!0,d())}function b(t){if(!O){var n=a(t).touches[0],i=X,o=e.vmouse.moveDistanceThreshold,r=s(t.target);(X=X||Math.abs(n.pageX-P)>o||Math.abs(n.pageY-A)>o)&&!i&&g("vmousecancel",t,r),g("vmousemove",t,r),d()}}function w(e){if(!O){u();var t,n,i=s(e.target);g("vmouseup",e,i),X||(t=g("vclick",e,i))&&t.isDefaultPrevented()&&(n=a(e).changedTouches[0],Y.push({touchID:H,x:n.clientX,y:n.clientY}),S=!0),g("vmouseout",e,i),X=!1,d()}}function y(t){var n,i=e.data(t,x);if(i)for(n in i)if(i[n])return!0;return!1}function C(){}var z,T,x="virtualMouseBindings",k="virtualTouchID",D="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),I="clientX clientY pageX pageY screenX screenY".split(" "),L=e.event.mouseHooks?e.event.mouseHooks.props:[],N=e.event.props.concat(L),E={},M=0,P=0,A=0,X=!1,Y=[],S=!1,O=!1,_="addEventListener"in n,j=e(n),F=1,H=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},T=0;T<D.length;T++)e.event.special[D[T]]=function(t){var n=t.substr(1);return{setup:function(){y(this)||e.data(this,x,{}),e.data(this,x)[t]=!0,E[t]=(E[t]||0)+1,1===E[t]&&j.bind(n,v),e(this).bind(n,C),_&&(E.touchstart=(E.touchstart||0)+1,1===E.touchstart&&j.bind("touchstart",h).bind("touchend",w).bind("touchmove",b).bind("scroll",m))},teardown:function(){--E[t]||j.unbind(n,v),_&&(--E.touchstart||j.unbind("touchstart",h).unbind("touchmove",b).unbind("touchend",w).unbind("scroll",m));var i=e(this),a=e.data(this,x);a&&(a[t]=!1),i.unbind(n,C),y(this)||i.removeData(x)}}}(D[T]);_&&n.addEventListener("click",function(t){var n,i,a,o,s,r=Y.length,l=t.target;if(r)for(n=t.clientX,i=t.clientY,z=e.vmouse.clickDistanceThreshold,a=l;a;){for(o=0;o<r;o++)if(s=Y[o],0,a===l&&Math.abs(s.x-n)<z&&Math.abs(s.y-i)<z||e.data(a,k)===s.touchID)return t.preventDefault(),void t.stopPropagation();a=a.parentNode}},!0)}(e,0,n),function(e){e.mobile={}}(e),function(e,t){var i={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,i),e.extend(e.mobile.support,i)}(e),function(e,t,i){function a(t,n,a,o){var s=a.type;a.type=n,o?e.event.trigger(a,i,t):e.event.dispatch.call(t,a),a.type=s}var o=e(n),s=e.mobile.support.touch,r="touchmove scroll",l=s?"touchstart":"mousedown",u=s?"touchend":"mouseup",c=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){a(o,(n=t)?"scrollstart":"scrollstop",e)}var n,i,o=this;e(o).bind(r,function(a){e.event.special.scrollstart.enabled&&(n||t(a,!0),clearTimeout(i),i=setTimeout(function(){t(a,!1)},50))})},teardown:function(){e(this).unbind(r)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),i=!1;n.bind("vmousedown",function(s){function r(){clearTimeout(c)}function l(){r(),n.unbind("vclick",u).unbind("vmouseup",r),o.unbind("vmousecancel",l)}function u(e){l(),i||p!==e.target?i&&e.preventDefault():a(t,"tap",e)}if(i=!1,s.which&&1!==s.which)return!1;var c,p=s.target;n.bind("vmouseup",r).bind("vclick",u),o.bind("vmousecancel",l),c=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(i=!0),a(t,"taphold",e.Event("taphold",{target:p}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),o.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,i=t.pageYOffset,a=e.clientX,o=e.clientY;return 0===e.pageY&&Math.floor(o)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=n,o-=i):(o<e.pageY-i||a<e.pageX-n)&&(a=e.pageX-n,o=e.pageY-i),{x:a,y:o}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(t,n,i,o){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return a(i,"swipe",e.Event("swipe",{target:o,swipestart:t,swipestop:n}),!0),a(i,s,e.Event(s,{target:o,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,i=e(n),a={};(t=e.data(this,"mobile-events"))||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=a,a.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var i,s=e.event.special.swipe.start(t),r=t.target,l=!1;a.move=function(t){s&&!t.isDefaultPrevented()&&(i=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(s,i,n,r))&&(e.event.special.swipe.eventInProgress=!1),Math.abs(s.coords[0]-i.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},a.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,o.off(c,a.move),a.move=null},o.on(c,a.move).one(u,a.stop)}},i.on(l,a.start)},teardown:function(){var t,n;(t=e.data(this,"mobile-events"))&&(n=t.swipe,delete t.swipe,0===--t.length&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(l,n.start),n.move&&o.off(c,n.move),n.stop&&o.off(u,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this),function(e,t){var i={animation:{},transition:{}},a=n.createElement("a"),o=["","webkit-","moz-","o-"];e.each(["animation","transition"],function(n,s){var r=0===n?s+"-name":s;e.each(o,function(n,o){if(a.style[e.camelCase(o+r)]!==t)return i[s].prefix=o,!1}),i[s].duration=e.camelCase(i[s].prefix+s+"-duration"),i[s].event=e.camelCase(i[s].prefix+s+"-end"),""===i[s].prefix&&(i[s].event=i[s].event.toLowerCase())}),e.support.cssTransitions=i.transition.prefix!==t,e.support.cssAnimations=i.animation.prefix!==t,e(a).remove(),e.fn.animationComplete=function(a,o,s){var r,l,u=this,c=function(){clearTimeout(r),a.apply(this,arguments)},p=o&&"animation"!==o?"transition":"animation";return e.support.cssTransitions&&"transition"===p||e.support.cssAnimations&&"animation"===p?(s===t&&(e(this).context!==n&&(l=3e3*parseFloat(e(this).css(i[p].duration))),(0===l||l===t||isNaN(l))&&(l=e.fn.animationComplete.defaultDuration)),r=setTimeout(function(){e(u).off(i[p].event,c),a.apply(u)},l),e(this).one(i[p].event,c)):(setTimeout(e.proxy(a,this),0),e(this))},e.fn.animationComplete.defaultDuration=1e3}(e)});var AlcatrazUtilities=function(e){function t(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return{escapeHtml:t}}(jQuery);!function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}();var AlcatrazNavigation=function(e){"use strict";var t=e("body"),n=e(window),i=alcatraz_vars.menu_toggle||"",a=alcatraz_vars.menu_close||"",o=alcatraz_vars.slide_duration||300,s=function(t){var n=e(this).parent("li");"focus"===t.type&&n.addClass("focus"),"blur"===t.type&&n.removeClass("focus")},r=function(e,t){var n=t.item||{},i=t.args||{};c(n,i)},l=function(t){var i=t.keyCode?t.keyCode:t.which,a=e(document.activeElement);if(t.altKey||t.ctrlKey)return!0;if(!a.is("nav a:focus"))return!0;var s,r=a.parent(),l=r.parent(),u={autoClose:!0,duration:o},c={autoClose:!1,duration:o},p={item:r,args:u};switch(i){case 9:if("keydown"===t.type)return!0;r.children("ul").length&&l.hasClass("top-level")?n.trigger("toggleListItem.alcatraz",p):l.hasClass("top-level")&&l.children("li.toggled").each(function(){var t={item:e(this),args:c};n.trigger("toggleListItem.alcatraz",t)});break;case 32:if("keydown"===t.type)return t.preventDefault(),!0;r.children("ul").length&&n.trigger("toggleListItem.alcatraz",p);break;case 37:if("keydown"===t.type)return t.preventDefault(),!0;l.hasClass("top-level")&&r.prev("li").length?(s=r.prev("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.find("a").first().focus()):l.parent("li").parent("ul").hasClass("top-level")?(s=l.parent("li").prev("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.find("a").first().focus()):l.hasClass("top-level")||(s=l.parent("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.find("a").first().focus());break;case 38:if("keydown"===t.type)return t.preventDefault(),!0;l.hasClass("top-level")||r.prev("li").length?!l.hasClass("top-level")&&r.prev("li").length&&r.prev("li").find("a").first().focus():l.parent("li").find("a").first().focus();break;case 39:if("keydown"===t.type)return t.preventDefault(),!0;l.hasClass("top-level")&&r.next("li").length?(s=r.next("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.find("a").first().focus()):!l.hasClass("top-level")&&r.children("ul").length?(r.hasClass("toggled")||n.trigger("toggleListItem.alcatraz",p),r.children("ul").first().find("a").first().focus()):l.parent("li").parent("ul").hasClass("top-level")?(s=l.parent("li").next("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.find("a").first().focus()):l.hasClass("top-level")||(s=l.parent("li"),n.trigger("toggleListItem.alcatraz",{item:s,args:u}),s.next("li").find("a").first().focus());break;case 40:if("keydown"===t.type)return t.preventDefault(),!0;r.children("ul").length&&l.hasClass("top-level")?r.find("ul li").first().find("a").first().focus():!l.hasClass("top-level")&&r.next("li").length&&r.next("li").find("a").first().focus()}return!0},u=function(){var t=e("#site-navigation"),i=t.find("#primary-menu");return t.hasClass("toggled")?(n.trigger("closeMobileNav.alcatraz"),t.removeClass("toggled"),i.attr("aria-expanded","false")):(n.trigger("openMobileNav.alcatraz"),t.addClass("toggled"),i.attr("aria-expanded","true")),this},c=function(e,t){var i=e.parents("ul").last(),a=e.find(".sub-level-toggle").first(),o=a.parents("li").last(),s=e.find("ul").first(),r=t||{},l=r.autoClose||!1,u=r.duration||500;return l&&i.find("ul").not(o.find("ul")).slideUp(u),e.toggleClass("toggled"),a.toggleClass("toggled").blur().next("ul").slideToggle(u).toggleClass("toggled"),i.is("#primary-menu")&&e.hasClass("menu-item-has-children")&&e.hasClass("toggled")?s.width()+s.offset().left>n.width()&&e.addClass("reverse-expand"):setTimeout(function(){e.removeClass("reverse-expand")},u),i.find(".toggled").not(o).not(o.find(".toggled")).removeClass("toggled"),this},p=function(t,a){var o=a||{};return e(t).each(function(){var t=e(this),a=t.find("li"),s=a.has("ul"),r='<a class="sub-level-toggle">'+Alcatraz.Utils.escapeHtml(i)+'<span class="sub-level-toggle-span span-1"></span><span class="sub-level-toggle-span span-2"></span><span class="sub-level-toggle-span span-3"></span></a>';t.addClass("top-level"),t.find("ul").addClass("sub-level"),a.addClass("list-item"),s.each(function(){e(this).find("a").first().after(r)}),t.find(".sub-level-toggle").on("click",function(t){t.preventDefault();var i={item:e(this).parent("li"),args:o};n.trigger("toggleListItem.alcatraz",i)})})},d=function(){return f(),g(),v(),this},f=function(){var i=e("#site-navigation");if(!i)return!1;var r=i.find(".menu-toggle");if(void 0===r)return!1;var l=i.find("#primary-menu");if(void 0===l)return r.css("display","none"),!1;var u=l.find("a"),c=l.find("ul"),d=c.find("a");l.attr("aria-expanded","false"),l.hasClass("nav-menu")||l.addClass("nav-menu"),e.mobile&&(t.hasClass("mobile-nav-style-slide-left")||t.hasClass("mobile-nav-style-slide-right"))&&(e.event.special.swipe.horizontalDistanceThreshold=15,e("#mobile-nav-left-swipe-zone, #mobile-nav-right-swipe-zone, .main-navigation .menu-overlay").on("swipeleft swiperight",function(){n.trigger("toggleMobileNav.alcatraz")})),r.add(".main-navigation .menu-overlay").on("click",function(){n.trigger("toggleMobileNav.alcatraz")}),p(l,{autoClose:!0,duration:o});var f=e('<div class="inner-menu-toggle"></div>');return f.text(a).append('<span class="inner-menu-toggle-span span-1"></span><span class="inner-menu-toggle-span span-2"></span><span class="inner-menu-toggle-span span-3"></span>'),l.before(f),e(".inner-menu-toggle").on("click",function(){n.trigger("toggleMobileNav.alcatraz")}),c.each(function(){e(this).parent().attr("aria-haspopup","true")}),d.attr("tabIndex","-1"),u.each(function(){e(this).on("focus blur",s)}),this},g=function(){var t=e(".alcatraz-sub-page-nav > ul");return!!t.length&&(p(t,{autoClose:!1,duration:o}),t.find("a").each(function(){e(this).on("focus blur",s)}),this)},v=function(){return n.off("toggleMobileNav.alcatraz",u),n.on("toggleMobileNav.alcatraz",u),n.off("toggleListItem.alcatraz",r),n.on("toggleListItem.alcatraz",r),n.off("keydown keyup",l),n.on("keydown keyup",l),this};return{toggleMobileNav:u,toggleListItem:c,initListToggle:p,initSiteNavigation:d,initPrimaryNavigation:f,initSubPageNavigation:g,resetNavEventListeners:v}}(jQuery),Alcatraz=function(e){return{Utils:AlcatrazUtilities||!1,Nav:AlcatrazNavigation||!1}}(jQuery);!function(e){e(document).ready(function(){Alcatraz.Nav.initSiteNavigation()}),e(document).on("customize-preview-menu-refreshed",function(){Alcatraz.Nav.initPrimaryNavigation()})}(jQuery);
//# sourceMappingURL=alcatraz-theme.min.js.map